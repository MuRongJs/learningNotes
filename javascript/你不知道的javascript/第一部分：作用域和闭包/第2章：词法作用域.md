作用域有两种主要的工作模型：词法作用域(javascript)、动态作用域。

作用域包含了一系列的“气泡”， 每一个都可以作为容器， 其中包含了标识符（变量、 函数） 的定义。 这些气互相嵌套并且整齐地排列成蜂窝型， 排列的结构是在写代码时定义的。

![](https://i.imgur.com/ShCC9Ra.png)
# 2.1 词法阶段 #
1、词法化是编译器对源代码的字符进行检查，如果是有状态的解析过程，还会赋予单词语义。

**词法作用域就是在词法阶段定义的作用域。**

2、通俗的讲词法作用域是由你在写代码时将变量和块作用域写在哪里来决定的， 因此当词法分析器处理代码时会保持作用域不变（大部分情况下是这样的）。

3、作用域的结构和互相之间的位置关系给引擎提供了足够的位置信息， 引擎用这些信息来查找标识符的位置。
# 2.2 欺骗词法 #
## 2.2.1 eval ##
eval函数可以接受一个字符串为参数，**将其插入到当前代码中并执行**。就像源代码本来就写了字符串中的代码一样，这样就能对词法作用域进行修改，引擎也会像平常一样操作。
## 2.2.2 with ##
with函数可以将对象处理为完全隔离的词法作用域，因此在词法作用域下对象的属性可以用词法标识符调用。

内部的var声明并不会被限制在这个作用域内，而是添加到with函数所处的函数作用域内。
# 2.3 小结 #
词法作用域通过源代码书写的位置来决定标识符在哪以及如何声明。编译的词法分析阶段基本能够知道全部标识符在哪里以及是如何声明的， 从而能够预测在执行过程中如何对它们进行查找。